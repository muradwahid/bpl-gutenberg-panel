{"version":3,"file":"TinyEditor.js","names":["_tinymceReact","require","_react","_blockEditor","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","len","length","arr2","r","l","t","Symbol","iterator","e","u","a","f","next","done","push","value","isArray","Button","wp","components","TinyEditor","exports","props","_props$onChange","onChange","_props$height","height","defaults","editorRef","useRef","tinyRef","_useState","useState","_useState2","media","setMedia","_useState3","_useState4","content","setContent","_useState5","_useState6","initialValue","setInitialValue","log","current","getContent","useEffect","_tinyRef$current","_tinyRef$current2","iframeContent","contentDocument","contentWindow","document","tinymce","querySelector","createImgEl","createElement","src","url","style","maxWidth","maxHeight","appendChild","React","MediaUploadCheck","MediaUpload","gallery","onSelect","allowedTypes","render","_ref","open","className","onClick","multiple","Editor","ref","apiKey","evt","editor","onInit","init","selector","menubar","plugins","toolbar","content_style","display","justifyContent","margin","variant"],"sources":["../../src/TinyEditor/TinyEditor.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport { Editor } from '@tinymce/tinymce-react';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport \"./tinyEditor.css\";\r\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\r\nconst { Button } = wp.components;\r\n\r\n/**\r\n * TinyEditor component.\r\n *\r\n * @component\r\n * @param {Object} props\r\n * @param {String} [props.value]\r\n * @param {Function} [props.onChange=() => {}]\r\n * @param {Number} [props.height=180] - Optional\r\n * @returns {JSX.Element}\r\n */\r\n\r\nexport const TinyEditor = (props) => {\r\n  const { value, onChange = () => { }, height = 180, default: defaults } = props;\r\n  const editorRef = useRef(null);\r\n  const tinyRef = useRef(null);\r\n  const [media, setMedia] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [initialValue, setInitialValue] = useState(\r\n    value || defaults || 'This is the initial content of the editor'\r\n  );\r\n  const log = () => {\r\n    if (editorRef.current) {\r\n      setContent(editorRef.current.getContent());\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    // const iframe = document?.querySelector('iframe');\r\n    const iframeContent =\r\n      tinyRef.current?.contentDocument || tinyRef.current?.contentWindow?.document;\r\n    const tinymce = iframeContent?.querySelector('.mce-content-body');\r\n    const createImgEl = document.createElement('img');\r\n    createImgEl.src = media.url;\r\n    createImgEl.style.maxWidth = '100%';\r\n    createImgEl.style.maxHeight = '100%';\r\n    tinymce?.appendChild(createImgEl);\r\n  }, [media.url]);\r\n\r\n  useEffect(() => {\r\n    onChange(content);\r\n  }, [content]);\r\n\r\n  useEffect(() => {\r\n    setContent(value);\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <MediaUploadCheck>\r\n        <MediaUpload\r\n          gallery={true}\r\n          onSelect={(value) => setMedia(value)}\r\n          allowedTypes={['image/svg+xml']}\r\n          render={({ open }) => (\r\n            <button className=\"custom-tinymce-button\" onClick={open}>\r\n              <span className=\"dashicons dashicons-admin-media\"></span>\r\n              Add Media\r\n            </button>\r\n          )}\r\n          multiple={false}\r\n        />\r\n      </MediaUploadCheck>\r\n      <Editor\r\n        ref={tinyRef}\r\n        apiKey=\"d1lxc40qcx6ad71i4bn1ih4d8l8oalalg9efymoc5l3ay9qo\"\r\n        onChange={(evt, editor) => setContent(editor.getContent())}\r\n        onInit={(evt, editor) => (editorRef.current = editor)}\r\n        initialValue={initialValue}\r\n        init={{\r\n          height,\r\n          selector: 'textarea',\r\n          menubar: false,\r\n          plugins: ['lists link image charmap', 'fullscreen', 'media paste'],\r\n          toolbar:\r\n            'undo redo formatselect bold italic link alignleft aligncenter alignright alignjustify bullist numlist outdent indent removeformat specilchar fullscreen',\r\n          content_style:\r\n            'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }',\r\n        }}\r\n      />\r\n      <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n        <Button style={{ margin: '10px 0' }} variant=\"primary\" onClick={log}>\r\n          Apply\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"}